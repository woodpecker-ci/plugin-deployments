variables:
  - &golang 'golang:1.24'

when:
  - event: pull_request
  - event: push
    branch: ${CI_REPO_DEFAULT_BRANCH}

steps:
  - name: lint
    image: *golang
    commands:
      - make vet
      - make formatcheck

  - name: test
    image: *golang
    commands:
      - make test
